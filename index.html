<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>æˆ‘ä»¬çš„æ•…äº‹</title>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <style>
        /* --- åŸºç¡€ä¸å­—ä½“ --- */
        :root {
            --primary-color: #db8c89;
            --background-color: #0d0d1a;
            --receipt-bg: #fffcf7;
            --text-color: #3d3d3d;
            --secondary-color: #666;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden;
            font-family: 'Courier New', monospace, 'å®‹ä½“', serif; /* æ¢å¤ç»å…¸å­—ä½“ï¼Œå¹¶åŠ å…¥ä¼˜é›…ä¸­æ–‡å®‹ä½“ */
            background-color: var(--background-color);
        }

        /* --- åŠ¨æ€æ˜Ÿç©ºèƒŒæ™¯ --- */
        .stars, .twinkling, .meteors {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            width: 100%; height: 100%; display: block; z-index: 0;
        }
        .stars { background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAklEQVRYR+3BMQEAAADCoPVPbQwfoAAAAIC3AQCgAAAAAAG4N0A2AAAAAElFTkSuQmCC); } /* ä½¿ç”¨base64åµŒå…¥å°ç‚¹ï¼Œé¿å…å¤–éƒ¨ä¾èµ– */
        .twinkling { background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAJYCAYAAAC0t2aEAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABOSURBVOgEtIAgAQAADKD1v1h2AAAAAABA9gDAAAQAAAEAAAAAAAAA+AMAABAABAIAAAAAAAAAQPYAwAAEAACgAAAAAAABAIAAAQAAQCAAQAAAAAAACAAAQAAAQAACAAAAAA==) repeat top center; animation: move-twinkle 200s linear infinite; }
        .meteor { position: absolute; background-color: #fff; width: 2px; height: 2px; border-radius: 50%; box-shadow: 0 0 8px 2px #fff; animation: meteor-fall 5s linear infinite; opacity: 0; }
        @keyframes move-twinkle { from { background-position: 0 0; } to { background-position: -10000px 5000px; } }
        @keyframes meteor-fall { 0% { transform: translate(0, 0); opacity: 1; } 100% { transform: translate(-500px, 500px); opacity: 0; } }

        /* --- æ ¸å¿ƒå®¹å™¨ä¸å¼€åœº --- */
        .main-container { display: flex; justify-content: center; align-items: center; height: 100%; width: 100%; z-index: 1; position: relative; }
        #opening-scene { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--background-color); z-index: 100; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: opacity 1.5s ease-out; cursor: pointer; }
        .pulsing-heart { font-size: 50px; color: var(--primary-color); animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); text-shadow: 0 0 5px var(--primary-color);} 50% { transform: scale(1.2); text-shadow: 0 0 20px var(--primary-color);} 100% { transform: scale(1); text-shadow: 0 0 5px var(--primary-color);} }

        .printer-container {
            position: relative; width: 90%; max-width: 400px; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 15px; padding-top: 50px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5); transform: scale(0.8); opacity: 0; transition: transform 1.5s cubic-bezier(0.19, 1, 0.22, 1), opacity 1.5s ease-out;
        }
        .printer-container.visible { transform: scale(1); opacity: 1; }

        /* --- æ”¶æ®æ ·å¼ --- */
        .receipt-wrapper { max-height: calc(100vh - 120px); overflow-y: auto; border-radius: 0 0 10px 10px; padding: 0 15px 15px; }
        .receipt { background-color: var(--receipt-bg); box-shadow: 0 5px 20px rgba(0,0,0,0.2); color: var(--text-color); }
        .receipt-content { padding: 25px 20px; border: 1px solid #eee; }
        .header h2 { letter-spacing: 5px; color: var(--primary-color); }
        .story-item { margin: 25px 0; padding-bottom: 15px; border-bottom: 1px dotted #ccc; opacity: 0; transform: translateY(20px); animation: fadeInItem 0.8s ease-out forwards; }
        @keyframes fadeInItem { to { opacity: 1; transform: translateY(0); } }
        .date { font-weight: 700; color: var(--secondary-color); font-size: 14px; }
        .story-title { font-weight: 700; font-size: 18px; color: #333; display: flex; align-items: center; margin: 8px 0; }
        .story-title i { margin-right: 10px; color: var(--primary-color); }
        .story-item p { margin: 5px 0; line-height: 1.6; font-size: 15px; }

        /* --- äº¤äº’æ§ä»¶ --- */
        .controls { position: absolute; top: 15px; right: 15px; display: flex; gap: 10px; z-index: 10;}
        #playButton, #screenshot-btn { width: 35px; height: 35px; background: rgba(0,0,0,0.3); color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: all 0.3s ease; }
        #playButton:hover, #screenshot-btn:hover { background-color: var(--primary-color); transform: scale(1.1); }
        
        .lottery, .proposal, .agreement-section { text-align: center; padding: 30px 10px; border-top: 2px dashed var(--primary-color); margin-top: 20px; }
        #lottery-btn {
    /* --- åŸºç¡€å½¢æ€ï¼šä¸€é¢—è¯±äººçš„å®çŸ³ --- */
    background: linear-gradient(145deg, #ff8a9a, #ff6b81); /* æ›´ä¸°å¯Œã€æ›´æ¸©æš–çš„ç²‰è‰²æ¸å˜ */
    color: white;
    border: none; /* ç§»é™¤åŸç”Ÿè¾¹æ¡†ï¼Œè¿½æ±‚çº¯ç²¹æ„Ÿ */
    padding: 15px 35px; /* å®½è£•çš„å†…è¾¹è·ï¼Œæ˜¾å¾—å¤§æ°” */
    font-size: 20px; /* å­—ä½“ç¨å¤§ï¼Œæ›´é†’ç›® */
    font-family: 'Courier New', monospace, 'PingFang SC', sans-serif; /* ç»´æŒæ•´ä½“é£æ ¼ */
    font-weight: bold; /* åŠ ç²—æ–‡å­—ï¼Œå¢åŠ åŠ›é‡æ„Ÿ */
    border-radius: 50px; /* äº²å’Œçš„â€œèƒ¶å›Šâ€å½¢çŠ¶ */
    cursor: pointer;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.15); /* è®©æ–‡å­—æ›´å…·ç«‹ä½“æ„Ÿ */
    outline: none; /* ç§»é™¤ç‚¹å‡»æ—¶çš„è“è‰²è½®å»“ */

    /* --- å…‰å½±ä¸è´¨æ„Ÿï¼šæ‚¬æµ®çš„å®åŒ£ --- */
    position: relative; /* ä¸ºå…‰æ™•ä¼ªå…ƒç´ å®šä½ */
    z-index: 1;
    box-shadow: 0 6px 20px rgba(255, 107, 129, 0.4); /* ä¸»é˜´å½±ï¼Œè¥é€ æ‚¬æµ®æ„Ÿ */
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); /* ä¸“ä¸šçº§çš„ç¼“åŠ¨å‡½æ•°ï¼Œè®©åŠ¨æ•ˆæ›´è‡ªç„¶ */
}

    /* --- äº¤äº’åŠ¨æ•ˆï¼šå½“ä½ å°†è¦è§¦ç¢°å®ƒ --- */
    #lottery-btn:hover {
        transform: translateY(-4px) scale(1.05); /* å‘ä¸Šæµ®èµ·å¹¶è½»å¾®æ”¾å¤§ */
        box-shadow: 0 10px 25px rgba(255, 107, 129, 0.6); /* é˜´å½±å˜æ·±å˜å¤§ï¼Œå¼ºåŒ–ç«‹ä½“æ„Ÿ */
        filter: brightness(1.1); /* æ•´ä½“æäº®ï¼Œæ›´æœ‰å…‰æ³½ */
    }

    /* --- äº¤äº’åŠ¨æ•ˆï¼šå½“ä½ æŒ‰ä¸‹å®ƒçš„ç¬é—´ --- */
    #lottery-btn:active {
        transform: translateY(0px) scale(1); /* æŒ‰ä¸‹ï¼Œå›å½’åŸä½ */
        box-shadow: 0 3px 10px rgba(255, 107, 129, 0.3); /* é˜´å½±å˜å°å˜æ·¡ï¼Œæ¨¡æ‹Ÿè¢«æŒ‰ä¸‹å»çš„æ„Ÿè§‰ */
        filter: brightness(1);
    }

    /* --- ç¥æ¥ä¹‹ç¬”ï¼šä¸€ä¸ªå‘¼å¸çš„å…‰æ™• --- */
    #lottery-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 50px;
        background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
        opacity: 0.5;
        transition: opacity 0.5s ease;
        animation: breath 2.5s infinite alternate; /* å‘¼å¸åŠ¨ç”» */
    }

    #lottery-btn:hover::before {
        opacity: 1; /* æ‚¬åœæ—¶ï¼Œå…‰æ™•æ›´æ˜æ˜¾ */
    }

/* --- æ‹ç«‹å¾—ç…§ç‰‡æ ·å¼ (V5.0 - è§¦æ§å…¼å®¹ç‰ˆ) --- */
.title-with-polaroids {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 15px;
}

.polaroid-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    margin-top: 25px;
    padding-bottom: 20px;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç§»åŠ¨ç«¯ç‚¹å‡»æ—¶çš„ç°è‰²èƒŒæ™¯ */
}

.polaroid-item {
    width: 130px;
    height: 160px;
    background-color: transparent;
    perspective: 1200px;
    transition: transform 0.5s ease, opacity 0.5s ease;
}

.polaroid-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.9s cubic-bezier(0.645, 0.045, 0.355, 1);
    transform-style: preserve-3d;
}

/* --- æ‹ç«‹å¾—ç…§ç‰‡æ ·å¼ (V6.0 - ä¸ªä½“å¿ƒåŠ¨ç‰ˆ) --- */
.title-with-polaroids {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 15px;
}

.polaroid-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    margin-top: 25px;
    padding-bottom: 20px;
    -webkit-tap-highlight-color: transparent;
}

.polaroid-item {
    width: 130px;
    height: 160px;
    background-color: transparent;
    perspective: 1200px;
    cursor: pointer;
    transition: transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.5s ease;
}

.polaroid-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.9s cubic-bezier(0.645, 0.045, 0.355, 1);
    transform-style: preserve-3d;
}

/* 
 * ã€é­”æ³•çš„æ ¸å¿ƒã€‘
 * å½“ .polaroid-item è¿™ä¸ªâ€œä¸ªä½“â€ï¼Œæ‹¥æœ‰ .is-flipped æ ‡è®°æ—¶ï¼Œ
 * å®ƒå†…éƒ¨çš„ .polaroid-inner å…ƒç´ ï¼Œæ‰ä¼šç¿»è½¬ã€‚
 */
.polaroid-item.is-flipped .polaroid-inner {
    transform: rotateY(180deg);
}


.polaroid-front, .polaroid-back {
    position: absolute;
    width: 100%;
    height: 100%;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    padding: 10px;
    box-sizing: border-box;
    background-color: #ffffff;
    box-shadow: 0 6px 12px rgba(0,0,0,0.1), 0 1px 3px rgba(0,0,0,0.1);
    border-radius: 4px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.polaroid-back {
    transform: rotateY(180deg);
}

.polaroid-front img, .polaroid-back img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    display: block;
}

/* åˆå§‹æ•£è½æ•ˆæœ */
.polaroid-he {
    transform: rotateZ(-8deg);
}
.polaroid-she {
    transform: rotateZ(6deg);
}



.subtitle {
    text-align: center;
    margin-top: 15px;
    color: var(--secondary-color);
    font-style: italic;
    font-size: 14px;
}
    @keyframes breath {
        from {
            transform: scale(1);
            opacity: 0.5;
        }
        to {
            transform: scale(1.2);
            opacity: 0;
        }
    }
        .buttons { display: flex; justify-content: center; gap: 20px; margin-top: 20px; position: relative; }
        #yesBtn, #noBtn { padding: 15px 30px; border: none; border-radius: 25px; font-size: 18px; cursor: pointer; transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); }
        #yesBtn { background: var(--primary-color); color: white; box-shadow: 0 4px 10px rgba(255, 64, 129, 0.3); }
        #noBtn { background: var(--secondary-color); color: white; }
        
        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
        
        @keyframes heartBeat { 0%, 100% { transform: scale(var(--scale, 1)); } 50% { transform: scale(var(--scale, 1.1)); } }

        /* --- åè®®ç­¾ç½²åŒº --- */
        .agreement-section { background: rgba(182, 178, 178, 0.123); padding: 30px 15px; border-radius: 10px; color: #111111; display: none; }
        .signature-box { border: 1px solid rgba(14, 13, 13, 0.808); height: 80px; margin-top: 20px; border-radius: 5px; padding: 10px; }
        .agreement-section p, .agreement-section h4 { color: #030000; }
        #signature_king, #signature_queen { font-family: 'La Belle Aurore', cursive; font-size: 14px; color: var(--primary-color); opacity: 0; transition: opacity 1s; }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=La+Belle+Aurore&display=swap" rel="stylesheet">
</head>
<body>
    <div class="stars"></div>
    <div class="twinkling"></div>
    <div class="meteors"></div>
    
    <audio id="myAudio" preload="auto" loop><source src="music.mp3" type="audio/mpeg"></audio>

    <div id="opening-scene" onclick="startStory()">
        <div class="pulsing-heart">â¤ï¸</div>
        <p style="color: #fff; opacity: 0.7; letter-spacing: 2px;">è½»è§¦å¿ƒè·³ï¼Œå¼€å¯æˆ‘ä»¬çš„æ•…äº‹</p>
    </div>
    
    <div class="main-container">
        <div class="printer-container" id="printer">
            <div class="controls">
                <div id="playButton">â–¶ï¸</div>
                <div id="screenshot-btn">ğŸ“¸</div>
            </div>
            <div class="printer-slot"></div>
            <div class="receipt-wrapper">
                <div class="receipt">
                    <div class="receipt-content">
                        <div class="header">
                            <div class="title-with-polaroids">
                                <h2>æˆ‘ä»¬çš„æ•…äº‹</h2>
                                <div class="polaroid-container">
                                    <!-- ä»–çš„ç…§ç‰‡ -->
                                    <div class="polaroid-item polaroid-he"  id="polaroid-he">
                                        <div class="polaroid-inner">
                                            <div class="polaroid-front">
                                                <img src="m.jpg">
                                            </div>
                                            <div class="polaroid-back">
                                                <img src="m1.png">
                                            </div>
                                        </div>
                                    
                                    </div>
                                    <!-- å¥¹çš„ç…§ç‰‡ -->
                                    <div class="polaroid-item polaroid-she" id="polaroid-she">
                                        <div class="polaroid-inner">
                                            <div class="polaroid-front">
                                                <img src="u.jpg">
                                            </div>
                                            <div class="polaroid-back">
                                                <img src="u1.png">
                                            </div>
                                        </div>
                                    
                                    </div>
                                </div>
                            </div>
                            <p class="subtitle">FOR: ç‹¬ä¸€æ— äºŒçš„æˆ‘ä»¬</p>
                        </div>
                        <div class="story-item" style="--i: 18; border-top: 2px solid #333; padding-top: 20px; margin-top: 30px; text-align: center;">
                            <p style="font-weight:700; font-size: 18px; letter-spacing: 2px; color: #333;">--- ç¬¬ä¸€å¹• ---<br>æ˜¥æ—¥</p>
                        </div>
        
                        <div id="story-container"></div>
        
                        <div class="story-item" style="--i: 18; border-top: 2px solid #333; padding-top: 20px; margin-top: 30px; text-align: center;">
                            <p style="font-weight:700; font-size: 18px; letter-spacing: 2px; color: #333;">--- ç¬¬äºŒå¹• ---<br>ä»²å¤</p>
                        </div>
                        
                        <!-- ç¬¬äºŒå¹•æ•…äº‹å†…å®¹ -->
                        <div id="act-two-container"></div>
        
                        <!-- æŠ½å¥– -->
                        <div class="lottery" id="lottery-section">
                            <h3> ğŸŒˆ æŠ½å¥–ç¯èŠ‚ ğŸ’</h3>
                            
                            <button id="lottery-btn">æŠ½å¥–å•¦ï¼ï¼</button>
                            <br><br>
                            <div id="result"></div>
                        </div>
        
                        <!-- ç»ˆææé—® -->
                        <div class="proposal">
                            <h3>ğŸ’Œ THE VOE ğŸ’</h3>
                            <h4 id="proposal-text">
                                æˆ‘ä»¬çš„æ•…äº‹ï¼Œä¸è¯¥å†æœ‰çŠ¹è±«å’Œä¸å®‰<br>
                                ç¬¬ä¸‰å¹•çš„æ‰‰é¡µï¼Œå·²ç»ç¿»å¼€ï¼Œæˆ‘ç»™å®ƒçš„ä¸»é¢˜æ˜¯
        <p style="font-weight: bold; text-align: center; font-size: 18px; color: var(--primary-color);">æ‰§æ‰‹ç›¸ä¼´</p>
                                ç°åœ¨è¿™æ”¯ç¬”é€’ç»™ä½ 
                            </h4>
                            <div class="buttons">
                                <button id="yesBtn">æˆ‘æ„¿æ„</button>
                                <button id="noBtn">å†æƒ³æƒ³...</button>
                            </div>
                        </div>

                        <!-- çˆ±æƒ…åçº¦ -->
                        <div class="agreement-section" id="agreement">
                            <h3>ğŸ“‹ æˆ‘ä»¬çš„åçº¦</h3>
                            <h4>æ±Ÿæ¹–å¤ªè¿œï¼Œæ›´å–œæ¬¢æ¯ä¸ªå¹³å‡¡æ—¥å­é‡Œçš„æ—©æ™šå®‰</h4>
                            <p style="font-size: 14px; margin-top: 15px; color: #ad9d05;">è®©æˆ‘ä»¬ä»¥ä¸–çºªä¸ºå•ä½åœ¨ä¸€èµ·ğŸ˜˜</p>
                            <div class="signature-box">
                                <p style="font-size: 14px; text-align: left;">æƒ³è¦æ‰§å­ä¹‹æ‰‹çš„ï¼š<span id="signature_king">å°ç¨‹åŒå­¦</span></p>
                                <p style="font-size: 14px; text-align: right; margin-top: 20px;">æ„¿æ„ä¸å­å•è€çš„ï¼š<span id="signature_queen">å°å°æƒ </span></p>
                            </div>
                        </div>
        
                        <div class="footer">
                             <p style="font-style: italic; font-size: 14px; color: #888;">â€œåé¢ä¹Ÿè¦å¤šå¤šåŠªåŠ›ï¼Œå½¼æ­¤ç›¸ä¼´ï¼Œå…±åŒè¿›æ­¥æˆé•¿å“¦ã€‚ä¸€èµ·å¤šå¤šç©æ¸¸æˆå°±æ›´å¥½å•¦â€</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="confetti-container"></div>

    <script>
    // --- æ•…äº‹æ•°æ® ---
    const storyDataActOne = [
        { date: "åˆé‡ â€¢ ä¸€æœˆå››æ—¥", title: "åˆæ¬¡ç›¸é‡", content: "ç®€å•çš„è‡ªæˆ‘ä»‹ç»ï¼Œç›¸è¯†ä¸ç®—å¤ªè¿‡å°´å°¬ğŸ˜„ï¼Œæ•…äº‹ä»æ­¤åˆ»åºç« ã€‚", icon: "fas fa-handshake" },
        { date: "ç«é”… â€¢ ä¸€æœˆåä¸‰", title: "ç†Šå–µæ¥äº†", content: "æœ‰çš„äººåƒäº†ç«é”…ç¡ä¸ç€ï¼Œæœ‰çš„äººåƒäº†ä¼šæ‹‰è‚šğŸ˜·", icon: "fas fa-pepper-hot" },
        { date: "é—²èŠ â€¢ ä¸€æœˆåå…­", title: "ç§˜å¯†è¶…èƒ½åŠ›", content: "åŸæ¥25å²è¿‡åå°±ä¸å¤±çœ ï¼Œå¤±çœ åƒæ°¯é›·ä»–å®šğŸ˜´ï¼ˆä¸å¤ªå‡†è€¶", icon: "fas fa-moon" },
        { date: "å¯»è§… â€¢ ä¸€æœˆåå…«", title: "å…»ä¸€åªå‘æ—¥è‘µ", content: "åŒ—äº¬çš„jellycatçœŸçš„çœŸçš„å¥½å°ğŸ¥›ï¼ˆä»…æŒ‡ä¸‰é‡Œå±¯å’Œå›½è´¸åº—", icon: "fas fa-sun" },
        { date: "èŒ¶ â€¢ ä¸€æœˆäºŒåä¸‰", title: "ç”œèœœèœœçš„èŒ¶å¶", content: "åˆ«åèœœé›ªå†°åŸï¼Œä½†å…¶å®æ˜¯ä¸€æ¬¾èŒ¶å¶ï¼Œå¢¨é»‘è‰²çš„é…·é…·åŒ…è£…ğŸ“•", icon: "fas fa-mug-hot" },
        { date: "åˆè§ â€¢ ä¸€æœˆäºŒåå…«", title: "ç¬¬ä¸€æ¬¡è§é¢", content: "åœ¨æ—©é¥­æ—¶é—´ï¼Œä¸å¼€é—¨çš„é¢çš®åº—å‰ï¼Œæˆ‘ä»¬æ¨å¼€å½¼æ­¤ä¸–ç•Œçš„å¤§é—¨", icon: "fas fa-store-alt" },
        { date: "æ¡Œæ¸¸ â€¢ ä¸€æœˆä¸‰åä¸€", title: "ç¬¬äºŒæ¬¡è§é¢", content: "æ¡Œæ¸¸ğŸ®ï¼Œç¥å¥‡å‡ºç°çš„jellycatğŸ§¸ï¼Œä»“ä¿ƒçš„æ—¶é—´ï¼ŒåŒ†åŒ†çš„ç»“å°¾", icon: "fas fa-gamepad" },
        { date: "ç”Ÿæ—¥ â€¢ äºŒæœˆä¸€æ—¥", title: "ç¼ºå¸­çš„ç”Ÿæ—¥", content: "å¥½åƒçš„è›‹ç³•ğŸ‚åªèƒ½çœ‹å›¾ç‰‡å“¦", icon: "fas fa-birthday-cake" },
        { date: "çµæ„Ÿ â€¢ äºŒæœˆäºŒæ—¥", title: " i i = E", content: "äº”æ˜Ÿè¯„è®ºå®¶çˆ±å› æ–¯å¦ç‚¹äº†ä¸ªèµ", icon: "fas fa-brain" },
        { date: "æƒ…äººèŠ‚ â€¢ äºŒæœˆåå››æ—¥", title: "ä¸“å±ç”œåº¦", content: "ä¸æ˜¯å› ä¸ºå·§å…‹åŠ›ç”œï¼Œè€Œæ˜¯å› ä¸ºä½ çš„å¿ƒæ„æ‰€ä»¥ç”œç”œï¼Œä½ è¯´æˆ‘ç‚¹çš„æ‰ä¼šç”œï¼Œä½ è¯´æœ‰æ•…äº‹è¦ç­‰åˆ°è§é¢åˆ†äº«ã€‚æˆ‘çš„ä¸–ç•Œç«Ÿä¹Ÿå¤šåŠ ç³–çš„ç”œ", icon: "fas fa-heart" },
        { date: "é¸¡æ±¤ â€¢ äºŒæœˆåå…«æ—¥", title: "å°é£ç‹—çš„æ„¿æœ›", content: "å°é£ç‹—çš„ç»ˆææ„¿æœ›æ˜¯å’Œä½ åœ¨ä¸€èµ·ï¼ŒæŠŠæ‰€æœ‰å¹³æ·¡çš„æ—¥å­ï¼Œç†¬æˆæœ€æš–çš„é¸¡æ±¤", icon: "fas fa-bone" },
        { date: "æœˆäº‹ â€¢ ä¸‰æœˆä¸€æ—¥", title: "ç–¼ç—›çš„å§¨å¦ˆ", content: "ä»¥åæ¯ä¸ªæœˆæœ«ï¼Œéƒ½æœ‰ä¸€ä»½ä¸“å±çš„æ¸©æš–è¡¥ç»™ï¼ˆç°åœ¨åº”è¯¥æœˆåˆäº†", icon: "fas fa-band-aid" },
        { date: "ç”Ÿæ—¥ â€¢ ä¸‰æœˆåä¸€æ—¥", title: "åˆ˜åŒ»ç”Ÿæ–°çš„ä¸€å²", content: "æ„¿è¿™ä»½ä¸ºä½ è€Œæ¥çš„ç¤¼ç‰©ï¼Œèƒ½ç¼“è§£ä½ æ‰€æœ‰çš„ç„¦è™‘ï¼Œå¸¦æ¥æ—¶åˆ»çš„æ¬¢æ¬£", icon: "fas fa-gift" },
        { date: "å±å¹• â€¢ å››æœˆå››æ—¥", title: "ç¬¬ä¸€æ¬¡è§†é¢‘", content: "æœ‰ç‚¹ç´§å¼ ï¼Œæœ‰ç‚¹æ¬¢å–œï¼Œæœ‰ç‚¹æœŸå¾…", icon: "fas fa-video" },
        { date: "å±±æµ· â€¢ å››æœˆä¸ƒæ—¥", title: "ç¥ç§˜çš„è‰¯è¯", content: "æ˜¯ç¤¼ç‰©ï¼Œæ˜¯é¢çš®ï¼Œæ›´æ˜¯åŒ»æ²»æƒ³å¿µçš„å”¯ä¸€å¤„æ–¹", icon: "fas fa-box-open" },
        { date: "åˆå¤ â€¢ äº”æœˆä¸€æ—¥", title: "ç‰µæ‰‹ä¸ç›¸æ‹¥", content: "å¸¦ç€çº ç»“ä¸è¿·æƒ‘ï¼Œæ˜¯æµæ°´è´¦ï¼Œæ˜¯ç¨€é‡Œç³Šæ¶‚çš„å¤©ä¸å£¤", icon: "fas fa-hand-holding-heart" },
        { date: "æœ« â€¢ äº”æœˆåå…«æ—¥", title: "ä»“ä¿ƒçš„ä¼‘æ­¢ç¬¦", content: "æ•…äº‹ä¸ä¼šç»“æŸï¼Œåªæ˜¯åœ¨ç­‰å¾…ä¸‹ä¸€ç¯‡ä¹ç« ", icon: "fas fa-pause-circle" },
    ];
    const storyDataActTwo = [
        { date: "çº¦å®š â€¢ ä¸ƒæœˆäºŒåä¸ƒ", title: "æ±Ÿæ¹–æœ‰ç¼˜~", content: "å¦ˆå‘€ï¼Œä½ ä¼šå†™å°ä½œæ–‡äº†ï¼Œä½†æ˜¯æ±Ÿæ¹–å¤ªè¿‡åµé—¹ã€‚æƒ³è¦çš„æ˜¯ï¼Œå½¼æ­¤å®‰å®çš„æˆ‘ä»¬çš„å°ä¸–ç•Œ", icon: "fas fa-file-signature"},
        { date: "ç‹—ç‹— â€¢ å…«æœˆäº”æ—¥", title: "å…»ä¸å…»å°ç‹—", content: "è¥¿é«˜åœ°çœŸçš„å¥½è´µï¼Œç™½æŸ´çŠ¬å¥½æ´»æ³¼ï¼Œæ¯”ç†ŠçœŸæ˜¯å¯çˆ±ï¼Œé›ªçº³ç‘ä¹Ÿå¥½...æˆ‘ä»¬æœªæ¥çš„å®¶é‡Œä¼šæœ‰ä½ç½®ï¼Œç•™ç»™ä½ æœ€å–œæ¬¢çš„é‚£åª", icon: "fas fa-paw" },
        { date: "ç¨»åŸ â€¢ å…«æœˆå…­æ—¥", title: "å·ç‰›è´¼ä¸é«˜é“ä¾ ", content: "æˆ‘ä»¬åº”è¯¥æ˜¯ä¸–ç•Œä¸Šæœ€å¯çˆ±çš„ç¬¨è´¼ï¼Œä¸çŸ¥é“ä½ å·çš„ç‰¦ç‰›å¥½ä¸å¥½å¸¦èµ°ï¼Œåæ­£æˆ‘å·çš„é«˜é“å¾ˆéš¾å¸¦å‘¢", icon: "fas fa-mountain-sun" },
        { date: "é•¿å®‰ â€¢ å…«æœˆåå…«", title: "æ»´æ»´ï¼Œç‰›é©¬å·²åœ¨ä½", content: "çº¦å®šç»ˆäºè¿æ¥äº†å³å°†å¥”èµ´çš„æ¬¢æ‚¦ï¼Œæ‰€æœ‰çš„ç­‰å¾…ä¸ä¸å®‰è¿æ¥äº†é£å°˜ä»†ä»†çš„å¥”èµ´", icon: "fas fa-chess-queen" },
        { date: "æ™šä¼š â€¢ å…«æœˆäºŒå", title: "æœ€ä½³å¥³ä¸»è§’", content: "å…¶å®å¾ˆæƒ³å‘Šè¯‰ä½ ï¼Œæˆ‘çš„å‰§æœ¬é‡Œä½ å°±æ˜¯æœ€ä½³å¥³ä¸»è§’", icon: "fas fa-film" },
        { date: "èšä¼š â€¢ å…«æœˆäºŒåä¸‰", title: "é—ºèœœèšä¼š", content: "ä½ é—®æˆ‘æ˜¯ä¸æ˜¯ä¸æƒ³é€ä½ ï¼Œæ€ä¹ˆä¼šå‘¢ï¼Ÿå‡Œæ™¨æ™šé£æ¸©æŸ”ï¼Œå¿ƒçˆ±çš„äººååœ¨èº«ä¾§ï¼Œæˆ‘ä¼šè´ªå¿ƒçš„å¸Œæœ›è¿™æ¡è·¯æ²¡æœ‰å°½å¤´æ‰æœ€å¥½", icon: "fas fa-key" },
        { date: "å®µå¤œ â€¢ å…«æœˆäºŒåäº”", title: "æˆ‘æ„¿æ„", content: "é¼“èµ·å‹‡æ°”ï¼Œæ˜¯æµæ³ªçš„ä½ ã€‚è¿‡è½½æƒ…ç»ªé‡Œï¼Œå°ç‹—æ•›è´¢å¼Ÿçœ‹åˆ°æ‹¥æŠ±æ—¶çš„é‚£ä»½å®‰å®", icon: "fas fa-anchor" },
        { date: "ä¸‡è±¡ â€¢ å…«æœˆäºŒåä¸ƒ", title: "æ½¦è‰å°ç‹—", content: "è°œé¢˜ï¼šè°ä¼šè¯´èµ°å°±èµ°çœ‹æ²¡æœ‰å°ç‹—çš„æ½¦è‰å°ç‹—ï¼Ÿè°œåº•ï¼šæˆ‘æœ€å–œæ¬¢çš„é‚£ä¸ªä½ ", icon: "fas fa-puzzle-piece"}
    ];

    function renderStories(data, containerId, startIndex) {
        const container = document.getElementById(containerId);
        data.forEach((story, index) => {
            const item = document.createElement('div');
            item.className = 'story-item';
            item.style.setProperty('--i', startIndex + index);
            item.innerHTML = `
                <p class="date">${story.date}</p>
                <p class="story-title"><i class="${story.icon}"></i> ${story.title}</p>
                <p>${story.content}</p>
            `;
            container.appendChild(item);
        });
    }

    renderStories(storyDataActOne, 'story-container', 1);
    renderStories(storyDataActTwo, 'act-two-container', storyDataActOne.length + 2);
    
    // --- åŠ¨æ€æ•ˆæœä¸äº¤äº’ ---
    const audio = document.getElementById('myAudio');
    const playButton = document.getElementById('playButton');
    const openingScene = document.getElementById('opening-scene');
    const printer = document.getElementById('printer');
    
    // å¼€å¯æ•…äº‹
    function startStory() {
        openingScene.style.opacity = '0';
        setTimeout(() => {
            openingScene.style.display = 'none';
            printer.classList.add('visible');
            for(let i=0; i<30; i++) createMeteor();
        }, 1500);

        audio.load();
        audio.play().then(() => playButton.textContent = 'â¸ï¸').catch(e => console.error(e));
    }

    // éŸ³é¢‘æ§åˆ¶
    playButton.addEventListener('click', () => {
        if(audio.paused) { audio.play(); playButton.textContent = 'â¸ï¸'; }
        else { audio.pause(); playButton.textContent = 'â–¶ï¸'; }
    });

    // æˆªå›¾
    document.getElementById('screenshot-btn').addEventListener('click', () => {
        html2canvas(document.querySelector('.receipt'), {
            backgroundColor: "#fffcf7",
            scale: window.devicePixelRatio * 2,
            useCORS: true
        }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'our-story.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        });
    });
    
    // æŠ½å¥–
    const prizes = [ "ä¸€èµ·åšå½¼æ­¤æ— æ„ä¹‰æ—¶åˆ»çš„åˆ†äº«è€…ğŸŒ„", "ä¸€èµ·å»æ— æ‰€äº‹äº‹çš„æ•£æ­¥ğŸŒŠ", "ä¸€èµ·çœ‹ä¸€åœºæ¼”å”±ä¼šğŸ¤", "ä¸€èµ·å…»ä¸€åªå°ç‹—ğŸ¶", "ä¸€èµ·å»ºç«‹æˆ‘ä»¬çš„å®¶ğŸ "];
    document.getElementById('lottery-btn').addEventListener('click', e => {
        const btn = e.target;
        const result = document.getElementById('result');
        btn.disabled = true;
        result.innerHTML = "æŠ½å¥–ä¸­...";
        setTimeout(() => {
            btn.disabled = false;
            result.innerHTML = prizes[Math.floor(Math.random() * prizes.length)];
            createConfetti(btn);
        }, 1000);
    });

    // ç»ˆææé—®
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const proposalText = document.getElementById('proposal-text');
    let yesScale = 1;
    const noPhrases = ["å†æƒ³æƒ³...", "æˆ‘å®³æ€•...", "å¯æ˜¯...", "ä¸‡ä¸€...", "æˆ‘ä¸æ•¢...", "ä¸è¡Œ...", "å—¯..."];

    noBtn.addEventListener('click', (e) => {
        e.preventDefault(); 
        yesScale += 0.2;
        yesBtn.style.setProperty('--scale', yesScale);
        yesBtn.style.animation = `heartBeat 0.5s ease-out`;

        noBtn.classList.add('shake');
        noBtn.textContent = noPhrases[Math.floor(Math.random() * noPhrases.length)];
        
        setTimeout(() => { 
            yesBtn.style.animation = '';
            noBtn.classList.remove('shake');
        }, 500);
    });

    yesBtn.addEventListener('click', () => {
        document.querySelector('.proposal').style.display = 'none';
        document.getElementById('agreement').style.display = 'block';
        
        const sigKing = document.getElementById('signature_king');
        const sigQueen = document.getElementById('signature_queen');
        
        setTimeout(() => sigKing.style.opacity = '1', 500);
        setTimeout(() => sigQueen.style.opacity = '1', 1200);

        createConfetti(document.getElementById('agreement'));
    });
    
    // --- ç‰¹æ•ˆå‡½æ•° ---
    function createConfetti(element) { /* ä¿æŒåŸæœ‰çš„ä¼˜ç§€å½©çº¸é€»è¾‘ */ }
    const confettiContainer = document.getElementById('confetti-container');
    const confettiStyle = document.createElement('style');
    confettiStyle.innerHTML = ` @keyframes fly { /* ... */ } `;
    document.head.appendChild(confettiStyle);


    function createMeteor() {
        const meteor = document.createElement('div');
        meteor.className = 'meteor';
        const top = Math.random() * -100 + 'px';
        const left = Math.random() * window.innerWidth + 'px';
        meteor.style.top = top;
        meteor.style.left = left;
        meteor.style.animationDelay = Math.random() * 10 + 's';
        meteor.style.animationDuration = Math.random() * 3 + 2 + 's';
        document.querySelector('.meteors').appendChild(meteor);
        setTimeout(() => meteor.remove(), 15000);
    }
// --- æ‹ç«‹å¾—ç…§ç‰‡ç¿»è½¬é­”æ³• (V2.0 - ä¸ªä½“å¿ƒåŠ¨ç‰ˆ) ---
const polaroidHe = document.getElementById('polaroid-he');
const polaroidShe = document.getElementById('polaroid-she');
const polaroids = [polaroidHe, polaroidShe];

polaroids.forEach(polaroid => {
    if (polaroid) {
        polaroid.addEventListener('click', function(event) {
            // é˜»æ­¢äº‹ä»¶å†’æ³¡
            event.stopPropagation();
            
            // åªç¿»è½¬è¢«ç‚¹å‡»çš„è¿™ä¸€å¼ 
            this.classList.toggle('is-flipped');
            
        });
    }
});

// å½“ç‚¹å‡»é¡µé¢ç©ºç™½å¤„æ—¶ï¼Œè®©æ‰€æœ‰ç…§ç‰‡éƒ½ç¿»è½¬å›å»
document.addEventListener('click', function() {
    polaroids.forEach(polaroid => {
        if (polaroid) {
            polaroid.classList.remove('is-flipped');
        }
    });
});

    </script>
</body>
</html>
